(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function a(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerpolicy&&(c.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?c.credentials="include":u.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(u){if(u.ep)return;u.ep=!0;const c=a(u);fetch(u.href,c)}})();var h={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,r){(function(a){var s=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:(Math.exp(e)+Math.exp(-e))*.5},u=Math.sinh||function(e){return Math.abs(e)<1e-9?e:(Math.exp(e)-Math.exp(-e))*.5},c=function(e){var n=Math.PI/4;if(-n>e||e>n)return Math.cos(e)-1;var i=e*e;return i*(i*(i*(i*(i*(i*(i*(i/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},d=function(e,n){var i=Math.abs(e),f=Math.abs(n);return i<3e3&&f<3e3?Math.sqrt(i*i+f*f):(i<f?(i=f,f=e/n):f=n/e,i*Math.sqrt(1+f*f))},p=function(){throw SyntaxError("Invalid Param")};function I(e,n){var i=Math.abs(e),f=Math.abs(n);return e===0?Math.log(f):n===0?Math.log(i):i<3e3&&f<3e3?Math.log(e*e+n*n)*.5:(e=e/2,n=n/2,.5*Math.log(e*e+n*n)+Math.LN2)}var O=function(e,n){var i={re:0,im:0};if(e==null)i.re=i.im=0;else if(n!==void 0)i.re=e,i.im=n;else switch(typeof e){case"object":if("im"in e&&"re"in e)i.re=e.re,i.im=e.im;else if("abs"in e&&"arg"in e){if(!Number.isFinite(e.abs)&&Number.isFinite(e.arg))return o.INFINITY;i.re=e.abs*Math.cos(e.arg),i.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!Number.isFinite(e.r)&&Number.isFinite(e.phi))return o.INFINITY;i.re=e.r*Math.cos(e.phi),i.im=e.r*Math.sin(e.phi)}else e.length===2?(i.re=e[0],i.im=e[1]):p();break;case"string":i.im=i.re=0;var f=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),v=1,b=0;f===null&&p();for(var m=0;m<f.length;m++){var C=f[m];C===" "||C==="	"||C===`
`||(C==="+"?v++:C==="-"?b++:C==="i"||C==="I"?(v+b===0&&p(),f[m+1]!==" "&&!isNaN(f[m+1])?(i.im+=parseFloat((b%2?"-":"")+f[m+1]),m++):i.im+=parseFloat((b%2?"-":"")+"1"),v=b=0):((v+b===0||isNaN(C))&&p(),f[m+1]==="i"||f[m+1]==="I"?(i.im+=parseFloat((b%2?"-":"")+C),m++):i.re+=parseFloat((b%2?"-":"")+C),v=b=0))}v+b>0&&p();break;case"number":i.im=0,i.re=e;break;default:p()}return isNaN(i.re)||isNaN(i.im),i};function o(e,n){if(!(this instanceof o))return new o(e,n);var i=O(e,n);this.re=i.re,this.im=i.im}o.prototype={re:0,im:0,sign:function(){var e=this.abs();return new o(this.re/e,this.im/e)},add:function(e,n){var i=new o(e,n);return this.isInfinite()&&i.isInfinite()?o.NAN:this.isInfinite()||i.isInfinite()?o.INFINITY:new o(this.re+i.re,this.im+i.im)},sub:function(e,n){var i=new o(e,n);return this.isInfinite()&&i.isInfinite()?o.NAN:this.isInfinite()||i.isInfinite()?o.INFINITY:new o(this.re-i.re,this.im-i.im)},mul:function(e,n){var i=new o(e,n);return this.isInfinite()&&i.isZero()||this.isZero()&&i.isInfinite()?o.NAN:this.isInfinite()||i.isInfinite()?o.INFINITY:i.im===0&&this.im===0?new o(this.re*i.re,0):new o(this.re*i.re-this.im*i.im,this.re*i.im+this.im*i.re)},div:function(e,n){var i=new o(e,n);if(this.isZero()&&i.isZero()||this.isInfinite()&&i.isInfinite())return o.NAN;if(this.isInfinite()||i.isZero())return o.INFINITY;if(this.isZero()||i.isInfinite())return o.ZERO;e=this.re,n=this.im;var f=i.re,v=i.im,b,m;return v===0?new o(e/f,n/f):Math.abs(f)<Math.abs(v)?(m=f/v,b=f*m+v,new o((e*m+n)/b,(n*m-e)/b)):(m=v/f,b=v*m+f,new o((e+n*m)/b,(n-e*m)/b))},pow:function(e,n){var i=new o(e,n);if(e=this.re,n=this.im,i.isZero())return o.ONE;if(i.im===0){if(n===0&&e>0)return new o(Math.pow(e,i.re),0);if(e===0)switch((i.re%4+4)%4){case 0:return new o(Math.pow(n,i.re),0);case 1:return new o(0,Math.pow(n,i.re));case 2:return new o(-Math.pow(n,i.re),0);case 3:return new o(0,-Math.pow(n,i.re))}}if(e===0&&n===0&&i.re>0&&i.im>=0)return o.ZERO;var f=Math.atan2(n,e),v=I(e,n);return e=Math.exp(i.re*v-i.im*f),n=i.im*v+i.re*f,new o(e*Math.cos(n),e*Math.sin(n))},sqrt:function(){var e=this.re,n=this.im,i=this.abs(),f,v;if(e>=0){if(n===0)return new o(Math.sqrt(e),0);f=.5*Math.sqrt(2*(i+e))}else f=Math.abs(n)/Math.sqrt(2*(i-e));return e<=0?v=.5*Math.sqrt(2*(i-e)):v=Math.abs(n)/Math.sqrt(2*(i+e)),new o(f,n<0?-v:v)},exp:function(){var e=Math.exp(this.re);return this.im,new o(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){var e=this.re,n=this.im;return new o(Math.expm1(e)*Math.cos(n)+c(n),Math.exp(e)*Math.sin(n))},log:function(){var e=this.re,n=this.im;return new o(I(e,n),Math.atan2(n,e))},abs:function(){return d(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,n=this.im;return new o(Math.sin(e)*s(n),Math.cos(e)*u(n))},cos:function(){var e=this.re,n=this.im;return new o(Math.cos(e)*s(n),-Math.sin(e)*u(n))},tan:function(){var e=2*this.re,n=2*this.im,i=Math.cos(e)+s(n);return new o(Math.sin(e)/i,u(n)/i)},cot:function(){var e=2*this.re,n=2*this.im,i=Math.cos(e)-s(n);return new o(-Math.sin(e)/i,u(n)/i)},sec:function(){var e=this.re,n=this.im,i=.5*s(2*n)+.5*Math.cos(2*e);return new o(Math.cos(e)*s(n)/i,Math.sin(e)*u(n)/i)},csc:function(){var e=this.re,n=this.im,i=.5*s(2*n)-.5*Math.cos(2*e);return new o(Math.sin(e)*s(n)/i,-Math.cos(e)*u(n)/i)},asin:function(){var e=this.re,n=this.im,i=new o(n*n-e*e+1,-2*e*n).sqrt(),f=new o(i.re-n,i.im+e).log();return new o(f.im,-f.re)},acos:function(){var e=this.re,n=this.im,i=new o(n*n-e*e+1,-2*e*n).sqrt(),f=new o(i.re-n,i.im+e).log();return new o(Math.PI/2-f.im,f.re)},atan:function(){var e=this.re,n=this.im;if(e===0){if(n===1)return new o(0,1/0);if(n===-1)return new o(0,-1/0)}var i=e*e+(1-n)*(1-n),f=new o((1-n*n-e*e)/i,-2*e/i).log();return new o(-.5*f.im,.5*f.re)},acot:function(){var e=this.re,n=this.im;if(n===0)return new o(Math.atan2(1,e),0);var i=e*e+n*n;return i!==0?new o(e/i,-n/i).atan():new o(e!==0?e/0:0,n!==0?-n/0:0).atan()},asec:function(){var e=this.re,n=this.im;if(e===0&&n===0)return new o(0,1/0);var i=e*e+n*n;return i!==0?new o(e/i,-n/i).acos():new o(e!==0?e/0:0,n!==0?-n/0:0).acos()},acsc:function(){var e=this.re,n=this.im;if(e===0&&n===0)return new o(Math.PI/2,1/0);var i=e*e+n*n;return i!==0?new o(e/i,-n/i).asin():new o(e!==0?e/0:0,n!==0?-n/0:0).asin()},sinh:function(){var e=this.re,n=this.im;return new o(u(e)*Math.cos(n),s(e)*Math.sin(n))},cosh:function(){var e=this.re,n=this.im;return new o(s(e)*Math.cos(n),u(e)*Math.sin(n))},tanh:function(){var e=2*this.re,n=2*this.im,i=s(e)+Math.cos(n);return new o(u(e)/i,Math.sin(n)/i)},coth:function(){var e=2*this.re,n=2*this.im,i=s(e)-Math.cos(n);return new o(u(e)/i,-Math.sin(n)/i)},csch:function(){var e=this.re,n=this.im,i=Math.cos(2*n)-s(2*e);return new o(-2*u(e)*Math.cos(n)/i,2*s(e)*Math.sin(n)/i)},sech:function(){var e=this.re,n=this.im,i=Math.cos(2*n)+s(2*e);return new o(2*s(e)*Math.cos(n)/i,-2*u(e)*Math.sin(n)/i)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var n=this.asin();return this.re=-this.im,this.im=e,e=n.re,n.re=-n.im,n.im=e,n},acosh:function(){var e=this.acos();if(e.im<=0){var n=e.re;e.re=-e.im,e.im=n}else{var n=e.im;e.im=-e.re,e.re=n}return e},atanh:function(){var e=this.re,n=this.im,i=e>1&&n===0,f=1-e,v=1+e,b=f*f+n*n,m=b!==0?new o((v*f-n*n)/b,(n*f+v*n)/b):new o(e!==-1?e/0:0,n!==0?n/0:0),C=m.re;return m.re=I(m.re,m.im)/2,m.im=Math.atan2(m.im,C)/2,i&&(m.im=-m.im),m},acoth:function(){var e=this.re,n=this.im;if(e===0&&n===0)return new o(0,Math.PI/2);var i=e*e+n*n;return i!==0?new o(e/i,-n/i).atanh():new o(e!==0?e/0:0,n!==0?-n/0:0).atanh()},acsch:function(){var e=this.re,n=this.im;if(n===0)return new o(e!==0?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var i=e*e+n*n;return i!==0?new o(e/i,-n/i).asinh():new o(e!==0?e/0:0,n!==0?-n/0:0).asinh()},asech:function(){var e=this.re,n=this.im;if(this.isZero())return o.INFINITY;var i=e*e+n*n;return i!==0?new o(e/i,-n/i).acosh():new o(e!==0?e/0:0,n!==0?-n/0:0).acosh()},inverse:function(){if(this.isZero())return o.INFINITY;if(this.isInfinite())return o.ZERO;var e=this.re,n=this.im,i=e*e+n*n;return new o(e/i,-n/i)},conjugate:function(){return new o(this.re,-this.im)},neg:function(){return new o(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new o(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new o(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new o(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,n){var i=new o(e,n);return Math.abs(i.re-this.re)<=o.EPSILON&&Math.abs(i.im-this.im)<=o.EPSILON},clone:function(){return new o(this.re,this.im)},toString:function(){var e=this.re,n=this.im,i="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<o.EPSILON&&(e=0),Math.abs(n)<o.EPSILON&&(n=0),n===0?i+e:(e!==0?(i+=e,i+=" ",n<0?(n=-n,i+="-"):i+="+",i+=" "):n<0&&(n=-n,i+="-"),n!==1&&(i+=n),i+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},o.ZERO=new o(0,0),o.ONE=new o(1,0),o.I=new o(0,1),o.PI=new o(Math.PI,0),o.E=new o(Math.E,0),o.INFINITY=new o(1/0,1/0),o.NAN=new o(NaN,NaN),o.EPSILON=1e-15,Object.defineProperty(o,"__esModule",{value:!0}),o.default=o,o.Complex=o,t.exports=o})()})(h);var N={},l={};Object.defineProperty(l,"__esModule",{value:!0});l.polarToRectangular=l.makeBoundedLinear=$=l.makeLinear=Y=l.sum=l.countMap=oe=l.initializedArray=l.count=j=l.zip=l.FIGURE_SPACE=l.NON_BREAKING_SPACE=l.dateIsValid=l.MIN_DATE=l.MAX_DATE=se=l.makePromise=l.filterMap=l.pick=l.pickAny=l.csvStringToArray=l.parseTimeT=l.parseIntX=l.parseFloatX=l.getAttribute=l.followPath=l.parseXml=l.testXml=ee=l.sleep=l.assertClass=void 0;function ve(t,r,a="Assertion Failed."){const s=u=>{throw new Error(`${a}  Expected type:  ${r.name}.  Found type:  ${u}.`)};if(t===null)s("null");else if(typeof t!="object")s(typeof t);else if(!(t instanceof r))s(t.constructor.name);else return t;throw new Error("wtf")}l.assertClass=ve;function Me(t){return new Promise(r=>setTimeout(r,t))}var ee=l.sleep=Me;function te(t){const a=new DOMParser().parseFromString(t,"application/xml");for(const s of Array.from(a.querySelectorAll("parsererror")))if(s instanceof HTMLElement)return{error:s};return{parsed:a}}l.testXml=te;function be(t){if(t!==void 0)return te(t)?.parsed?.documentElement}l.parseXml=be;function ne(t,...r){for(const a of r){if(t===void 0)return;if(typeof a=="number")t=t.children[a];else{const s=t.getElementsByTagName(a);if(s.length!=1)return;t=s[0]}}return t}l.followPath=ne;function xe(t,r,...a){if(r=ne(r,...a),r!==void 0&&!!r.hasAttribute(t))return r.getAttribute(t)??void 0}l.getAttribute=xe;function re(t){if(t==null)return;const r=parseFloat(t);if(isFinite(r))return r}l.parseFloatX=re;function ie(t){const r=re(t);if(r!==void 0)return r>Number.MAX_SAFE_INTEGER||r<Number.MIN_SAFE_INTEGER||r!=Math.floor(r)?void 0:r}l.parseIntX=ie;function ge(t){if(typeof t=="string"&&(t=ie(t)),t!=null&&!(t<=0))return new Date(t*1e3)}l.parseTimeT=ge;const Ee=t=>{const r=/(,|\r?\n|\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^,\r\n]*))/gi,a=[[]];let s;for(;s=r.exec(t);)s[1].length&&s[1]!==","&&a.push([]),a[a.length-1].push(s[2]!==void 0?s[2].replace(/""/g,'"'):s[3]);return a};l.csvStringToArray=Ee;function Ie(t){const r=t.values().next();if(!r.done)return r.value}l.pickAny=Ie;function Ne(t){return t[Math.random()*t.length|0]}l.pick=Ne;function ye(t,r){const a=[];return t.forEach((s,u)=>{const c=r(s,u);c!==void 0&&a.push(c)}),a}l.filterMap=ye;function Ce(){let t,r;return{promise:new Promise((s,u)=>{t=s,r=u}),resolve:t,reject:r}}var se=l.makePromise=Ce;l.MAX_DATE=new Date(864e13);l.MIN_DATE=new Date(-864e13);function Le(t){return isFinite(t.getTime())}l.dateIsValid=Le;l.NON_BREAKING_SPACE="\xA0";l.FIGURE_SPACE="\u2007";function*Te(...t){const r=t.map(a=>a[Symbol.iterator]());for(;;){const a=r.map(s=>s.next());if(a.some(({done:s})=>s))break;yield a.map(({value:s})=>s)}}var j=l.zip=Te;function*Se(t=0,r=1/0,a=1){for(let s=t;s<r;s+=a)yield s}l.count=Se;function ae(t,r){const a=[];for(let s=0;s<t;s++)a.push(r(s));return a}var oe=l.initializedArray=ae;l.countMap=ae;function Pe(t){return t.reduce((r,a)=>r+a,0)}var Y=l.sum=Pe;function ke(t,r,a,s){const u=(s-r)/(a-t);return function(c){return(c-t)*u+r}}var $=l.makeLinear=ke;function Ae(t,r,a,s){a<t&&([t,r,a,s]=[a,s,t,r]);const u=(s-r)/(a-t);return function(c){return c<=t?r:c>=a?s:(c-t)*u+r}}l.makeBoundedLinear=Ae;function Fe(t,r){return{x:Math.sin(r)*t,y:Math.cos(r)*t}}l.polarToRectangular=Fe;Object.defineProperty(N,"__esModule",{value:!0});N.createElementFromHTML=N.getHashInfo=N.getAudioBalanceControl=N.getBlobFromCanvas=N.loadDateTimeLocal=x=N.getById=void 0;const ue=l;function Ve(t,r){const a=document.getElementById(t);if(!a)throw new Error("Could not find element with id "+t+".  Expected type:  "+r.name);if(a instanceof r)return a;throw new Error("Element with id "+t+" has type "+a.constructor.name+".  Expected type:  "+r.name)}var x=N.getById=Ve;function Be(t,r,a="milliseconds"){let s;switch(a){case"minutes":{s=r.getSeconds()*1e3+r.getMilliseconds();break}case"seconds":{s=r.getMilliseconds();break}case"milliseconds":{s=0;break}default:throw new Error("wtf")}t.valueAsNumber=+r-r.getTimezoneOffset()*6e4-s}N.loadDateTimeLocal=Be;function De(t){const{reject:r,resolve:a,promise:s}=(0,ue.makePromise)();return t.toBlob(u=>{u?a(u):r(new Error("blob is null!"))}),s}N.getBlobFromCanvas=De;function Oe(t){const r=new AudioContext,a=r.createMediaElementSource(t),s=new StereoPannerNode(r,{pan:0});return a.connect(s).connect(r.destination),u=>{s.pan.value=u}}N.getAudioBalanceControl=Oe;function Re(){const t=new Map;return/^#?(.*)$/.exec(location.hash.replace("+","%20"))[1].split("&").forEach(s=>{const u=s.split("=",2);if(u.length==2){const c=decodeURIComponent(u[0]),d=decodeURIComponent(u[1]);t.set(c,d)}}),t}N.getHashInfo=Re;function Ze(t,r){var a=document.createElement("div");return a.innerHTML=t.trim(),(0,ue.assertClass)(a.firstChild,r,"createElementFromHTML:")}N.createElementFromHTML=Ze;function*ce(t,r=[]){if(t.length==0)yield r;else for(let a=0;a<t.length;a++){const s=t[a],u=[...r,s],c=[...t.slice(0,a),...t.slice(a+1)];yield*ce(c,u)}}function W(t,r){if(!(r instanceof Array))return t;if(t.length!=r.length)throw new Error("wtf");let a=1/0,s;for(const u of ce(t)){let c=0;for(const[d,p]of j(u,r))c+=d.sub(p).abs();c<a&&(a=c,s=u)}return s}const _=new h.exports.Complex(1),P={shortName:"Square Root",allWs(t,r){const a=t.sqrt(),s=[a,a.neg()];return W(s,r)},error(t,r){return t.pow(2).sub(r).abs()},branchPoints:[h.exports.Complex.ZERO],initialZ:new h.exports.Complex(4),showSimpleCut:!0},U={shortName:"Natural Log",allWs(t,r){function a(u,c){return u.add(0,c)}const s=t.log();return r?r.map(u=>{const c=u.im-s.im,d=Math.round(c/(Math.PI*2))*Math.PI*2;return a(s,d)}):[a(s,Math.PI*4),a(s,Math.PI*2),s,a(s,-Math.PI*2),a(s,-Math.PI*4)]},error(t,r){return t.exp().sub(r).abs()},branchPoints:[h.exports.Complex.ZERO],initialZ:h.exports.Complex.E,showSimpleCut:!0},_e={shortName:"\u{1D498}\xB3-\u{1D49B}\u{1D498}-2 = 0",initialZ:h.exports.Complex.ZERO,branchPoints:[new h.exports.Complex(3),new h.exports.Complex({r:3,phi:Math.PI*2/3}),new h.exports.Complex({r:3,phi:Math.PI*4/3})],allWs(t,r){const a=_.sub(t.pow(3).div(27)).sqrt(),s=t.isZero()?_:t.div(t.pow(3).pow(1/3)),u=_.add(a).pow(1/3),c=s.mul(_.sub(a).pow(1/3)),d=u.add(c),p=u.sub(c).mul(0,.866025403785),I=u.add(c).mul(-.5),O=I.add(p),o=I.sub(p);return W([d,O,o],r)},error(t,r){return t.pow(3).sub(r.mul(t)).sub(2).abs()},showSimpleCut:!1},R=[P,U,_e],H=x("formula",HTMLSelectElement);R.forEach(t=>{const r=document.createElement("option");r.innerText=t.shortName,H.appendChild(r)});const le=x("bottom",SVGGElement),he=x("main",SVGGElement),q=x("top",SVGGElement),fe=x("positionInfo",HTMLDivElement),qe=x("errorInfo",HTMLDivElement),K=new Intl.NumberFormat("en-US",{minimumSignificantDigits:4,maximumSignificantDigits:4});function He(t){const r=t.re,a=t.im;let s="";return(r|0)==r?s+=r:s+=K.format(r),a!=0&&(a>0&&(s+="+"),(a|0)==a?s+=a:s+=K.format(a),s+="\u{1D4F2}"),s}class w{static#t=Array.from(document.querySelectorAll("button, select"));static#e;static now(){if(this.#e)throw new Error("Already disabled.");const r=[];this.#t.forEach(a=>{a.disabled||(a.disabled=!0,r.push(a))}),this.#e=r,X()}static restore(){if(!this.#e)throw new Error("Already disabled.");this.#e.forEach(r=>r.disabled=!1),this.#e=void 0,X()}static isEnabled(){return this.#e==null}static isDisabled(){return this.#e!=null}}class Q{constructor(r,a){this.color=r,this.#n=a,this.#r=a;const s=document.createElement("div");s.style.color=r,fe.appendChild(s),this.#i=s,this.displayValue();const u=a.re,c=-a.im,d=document.createElementNS("http://www.w3.org/2000/svg","circle");d.cx.baseVal.value=u,d.cy.baseVal.value=c,d.r.baseVal.value=.2,d.style.setProperty("--base-color",r),q.appendChild(d),this.#t=d;const p=document.createElementNS("http://www.w3.org/2000/svg","rect"),I=.5;p.x.baseVal.value=u-I/2,p.y.baseVal.value=c-I/2,p.width.baseVal.value=I,p.height.baseVal.value=I,p.style.setProperty("--base-color",r),le.appendChild(p),this.newLine()}#t;#e;get lastSegment(){return this.#e}#n;get currentValue(){return this.#n}set currentValue(r){const a=r.re,s=-r.im,u=this.#e;u.x2.baseVal.value=a,u.y2.baseVal.value=s;const c=this.#t;c.cx.baseVal.value=a,c.cy.baseVal.value=s,this.#n=r,this.displayValue()}#r;undo(){this.currentValue=this.#r}get lastSaved(){return this.#r}#i;displayValue(){this.#i.innerText=He(this.#n)}newLine(){const r=this.#n,a=r.re,s=-r.im,u=document.createElementNS("http://www.w3.org/2000/svg","line");u.x1.baseVal.value=a,u.y1.baseVal.value=s,u.x2.baseVal.value=a,u.y2.baseVal.value=s,u.setAttribute("stroke",this.color),u.classList.add("active"),this.#e?.classList?.remove("active"),he.appendChild(u),this.#e=u,this.#r=r}save(){this.#n.equals(this.#r)||(this.#e&&this.#e.classList.add("can-be-styled"),this.newLine())}}let L,g,B,T;const y=x("showCut",HTMLInputElement);function X(){y.disabled=w.isDisabled()||!L.showSimpleCut}function me(){T&&(T.style.display=y.checked?"":"none")}y.addEventListener("click",()=>{me()});function de(){if(T){const t=15*Math.SQRT2,a=L.branchPoints[0].sub(g.lastSaved).arg(),s=new h.exports.Complex({r:t,phi:a});T.x2.baseVal.value=s.re,T.y2.baseVal.value=-s.im}}function V(t){le.innerHTML="",he.innerHTML="",q.innerHTML="",T=void 0,fe.innerHTML="",t?(L=t,H.selectedIndex=R.indexOf(t)):L=R[H.selectedIndex];const r=L.initialZ;g=new Q("black",r);const a=L.allWs(r);if(B=a.map((s,u)=>{const c=`hsl(${u/a.length}turn, 100%, 50%)`;return new Q(c,s)}),L.showSimpleCut){T=document.createElementNS("http://www.w3.org/2000/svg","line"),T.classList.add("cut-ray");const s=L.branchPoints[0];T.x1.baseVal.value=s.re,T.y1.baseVal.value=-s.im,de(),me(),q.appendChild(T)}X(),pe();for(const s of L.branchPoints){const u=document.createElementNS("http://www.w3.org/2000/svg","circle");u.classList.add("branch-point"),u.cx.baseVal.value=s.re,u.cy.baseVal.value=-s.im,u.r.baseVal.value=.1,q.appendChild(u)}}V();H.addEventListener("change",()=>{V()});x("reset",HTMLButtonElement).addEventListener("click",()=>V(L));function pe(){const t=g.currentValue,r=Y(B.map(a=>L.error(a.currentValue,t)));qe.innerText=`Total error = ${r}`}function k(t){g.currentValue=t;for(const[r,a]of j(L.allWs(t,B.map(s=>s.lastSaved)),B))a.currentValue=r;pe()}const D=document.querySelector("svg"),G=D.createSVGPoint();function ze(t){G.x=t.clientX,G.y=t.clientY;const r=G.matrixTransform(D.getScreenCTM().inverse());return new h.exports.Complex(r.x,-r.y)}function Z(){g.save(),de(),B.forEach(t=>t.save())}D.addEventListener("mouseleave",()=>{w.isDisabled()||(g.undo(),B.forEach(t=>t.undo()))});D.addEventListener("mousemove",t=>{w.isDisabled()||(k(ze(t)),t.buttons&1&&Z())});D.addEventListener("mouseup",t=>{w.isDisabled()||Z()});function S(t){switch(typeof t){case"number":{const r=R[t];if(!r)throw new Error(`No such formula: ${t}`);V(r);break}case"object":{V(t);break}case"string":{const r=R.find(a=>a.shortName==t);if(!r)throw new Error(`No such formula: "${t}"`);V(r);break}}}function we(t){return new h.exports.Complex({r:1,phi:t})}function z(t){return we(t*(Math.PI*2))}function J(t){return we(t*(Math.PI/180))}const Ge={shortName:"Sixth Root",allWs(t,r){const s=t.pow(.16666666666666666),u=oe(6,c=>s.mul(z(c/6)));return W(u,r)},error(t,r){return t.pow(6).sub(r).abs()},branchPoints:[h.exports.Complex.ZERO],initialZ:new h.exports.Complex(6),showSimpleCut:!0};class A{constructor(r,a,s){this.center=r,this.#t=a.sub(r),this.#n=s>0?1:-1,this.#r=s/this.#n}#t;#e=0;#n;#r;getPosition(r){return r==1&&(r=0),this.#t.mul(z(r*this.#n)).add(this.center)}updateNow(r){const a=this.#r*r|0;for(;this.#e<a;)this.#e++,k(this.getPosition(this.#e/this.#r)),Z();k(this.getPosition(r))}}function M(t,r){const a=se(),s=performance.now(),u=s+t,c=$(s,0,u,1);let d=s;function p(I){try{I>=u?(r.updateNow(1),a.resolve()):(I>d&&r.updateNow(c(I)),requestAnimationFrame(p))}catch(O){a.reject(O)}}return requestAnimationFrame(p),a.promise}class E{constructor(r,a,s){this.to=a,this.steps=s,this.#e=a.sub(r)}#t=0;#e;getPosition(r){return this.to.sub(this.#e.mul(1-r))}updateNow(r){if(this.steps){const a=this.steps*r|0;for(;this.#t<a;)this.#t++,k(this.getPosition(this.#t/this.steps)),Z()}k(this.getPosition(r))}static makeDiamond(r,a=g.lastSaved){const s=[];for(let u=0;u<4;u++){const c=Xe(a);s.push(new this(a,c,r)),a=c}return s}}function Xe(t){return new h.exports.Complex({re:-t.im,im:t.re})}function F(t){Array.from(D.querySelectorAll(".can-be-styled")).forEach(r=>{const a=r.classList;a.remove("can-be-styled"),a.add(t)})}["thin","fat"].forEach(t=>{x(t,HTMLButtonElement).addEventListener("click",()=>{F(t)})});x("showMeCirclesAndRoots",HTMLButtonElement).addEventListener("click",async()=>{w.now(),y.checked=!1,S(P),await M(5e3,new A(h.exports.Complex.ZERO,g.lastSaved,20)),F("fat"),await ee(500),await M(5e3,new A(h.exports.Complex.ZERO,g.lastSaved,20)),w.restore()});x("showMeBranchCuts1",HTMLButtonElement).addEventListener("click",async()=>{w.now(),y.checked=!0,S(P);let t=g.currentValue;const r=[[500,new h.exports.Complex(1,1)],[750,new h.exports.Complex(1,-1)],[750,new h.exports.Complex(1,1)],[750,new h.exports.Complex(1,-1)],[750,new h.exports.Complex(1,1)],[500,new h.exports.Complex(-2,2)],[750,new h.exports.Complex(-2,-2)],[750,new h.exports.Complex(-2,2)],[750,new h.exports.Complex(-2,-2)],[750,new h.exports.Complex(-2,2)],[500,new h.exports.Complex(1,1)],[500,new h.exports.Complex(1,-1)],[500,new h.exports.Complex(-2,-2)],[750,new h.exports.Complex(-2,2)],[750,new h.exports.Complex(-2,-2)],[750,new h.exports.Complex(-2,2)],[750,new h.exports.Complex(-2,-2)]];for(const[a,s]of r)await M(a,new E(t,s,0)),t=s;w.restore()});x("showMeBranchCuts2",HTMLButtonElement).addEventListener("click",async()=>{w.now(),y.checked=!0,S(P);let t=new h.exports.Complex(-2,-2);k(t),Z();const r=[[750,new h.exports.Complex(-2,2)],[750,new h.exports.Complex(-2,-2)],[750,new h.exports.Complex(-2,2)],[750,new h.exports.Complex(-2,-2)]];for(const[a,s]of r)await M(a,new E(t,s,5)),t=s;F("thin"),await M(5e3,new A(h.exports.Complex.ZERO,t,7)),F("fat"),await M(5e3,new A(h.exports.Complex.ZERO,t,35)),w.restore()});x("showMeSquare1",HTMLButtonElement).addEventListener("click",async()=>{w.now(),y.checked=!1,S(P);for(const t of E.makeDiamond(1))await M(1500,t);w.restore()});x("showMeSquare2",HTMLButtonElement).addEventListener("click",async()=>{w.now(),y.checked=!1,S(P);for(const t of E.makeDiamond(1))t.updateNow(1);F("thin");for(const t of E.makeDiamond(2))await M(1500,t);w.restore()});x("showMeSquare3",HTMLButtonElement).addEventListener("click",async()=>{w.now(),y.checked=!1,S(P);for(const t of E.makeDiamond(1))t.updateNow(1);F("thin");for(const t of E.makeDiamond(2))t.updateNow(1);F("fat");for(const t of E.makeDiamond(30))await M(1500,t);w.restore()});x("showMeEquilateralTriangle",HTMLButtonElement).addEventListener("click",async()=>{const t=new h.exports.Complex(6.5),r=t.mul(z(1/3)),a=t.mul(z(2/3));w.now(),y.checked=!1,S(P),await M(250,new E(g.currentValue,t,1)),await M(2e3,new E(t,r,50)),await M(2e3,new E(r,a,50)),await M(2e3,new E(a,t,50)),w.restore()});x("showMeRightTriangle",HTMLButtonElement).addEventListener("click",async()=>{const r=6*Math.sqrt(3),a=2*6;w.now(),y.checked=!1,S(P);const s=g.lastSaved,u=s.add(J(90+45+20).mul(r)),c=s.add(J(180+45+20).mul(6)),d=6e3,p=Y([6,r,a]);await M(d*r/p,new E(s,u,50)),await M(d*a/p,new E(u,c,50)),await M(d*6/p,new E(c,s,50)),w.restore()});x("showMeLog1",HTMLButtonElement).addEventListener("click",async()=>{w.now(),y.checked=!1,S(U),await M(250,new E(g.lastSaved,new h.exports.Complex(2),1)),await M(2e3,new A(h.exports.Complex.ZERO,g.lastSaved,50)),await M(250,new E(g.lastSaved,new h.exports.Complex(4),1)),await M(4e3,new A(h.exports.Complex.ZERO,g.lastSaved,100)),await M(250,new E(g.lastSaved,new h.exports.Complex(6),1)),await M(6e3,new A(h.exports.Complex.ZERO,g.lastSaved,-150)),w.restore()});x("showMeLog2",HTMLButtonElement).addEventListener("click",async()=>{w.now(),y.checked=!1,S(U);const t=$(0,1,1,-8);await M(5e3,{updateNow(a){const s=Math.exp(t(a));k(new h.exports.Complex(s))}}),w.restore()});window.phil={updateZ(t,r){k(new h.exports.Complex(t,r))},selectFormula:S,sixthRootFormula:Ge,DisableUserInterface:w};
